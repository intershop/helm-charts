# Default values for pwa-main.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
replicaCount: 1

image:
  repository: intershophub/intershop-pwa-ssr
  tag: latest
  pullPolicy: Always

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

upstream:
  icmBaseURL: https://pwa-ish-demo.test.intershop.com
  ## @param cdnPrefixURL The base URL of your CDN
  ## E.g:
  ## cdnPrefixURL: "https://www.example.com"
  cdnPrefixURL: ""
service:
  type: ClusterIP
  port: 4200

##
## @param hybrid Set to enabled PWA hybrid mode. This means pages are produced by PWA or ICM.
## You must specify the icm-web chart's wa-service reference. Communication cannot be routed through
## ICM ingress controller.
##
hybrid:
  enabled: false
  backend: {}
#    service: icm-web
#    port: 443

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}
## @param podAnnotations Annotations for SSR pods
## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
##
podAnnotations: {}
## @param environment Extra environment variables to be set on SSR containers
## E.g:
## environment:
##   - name: FOO
##     value: BAR
##
environment: []
## Prometheus Exporter / Metrics
##
metrics:
  ## @param metrics.enabled Expose Prometheus metrics of SSR container
  ##
  enabled: false

livenessProbe:
  {}
  # exec:
  #   command:
  #   - /bin/sh
  #   - -c
  #   - netstat -an | egrep 4200.*LISTEN | grep 4200
  # initialDelaySeconds: 10
  # periodSeconds: 30

readinessProbe:
  {}
  # exec:
  #   command:
  #   - /bin/sh
  #   - -c
  #   - netstat -an | egrep 4200.*LISTEN | grep 4200
  # initialDelaySeconds: 10
  # periodSeconds: 30

cache:
  enabled: true

  ####
  ## @param NGinx ignore query parameters during caching
  ##   cacheIgnoreParams: |-
  ##     params:
  ##     - utm_source
  ##     - utm_campaign
  ##     - utm_medium
  ##     - utm_content
  ##     - utm_term
  ##     - utm_adgroup
  ##     - utm_id
  ##     - gclid
  ##     - gclsrc
  ##     - dclid
  ##     - fbclid
  ##     - gbraid
  ##     - wbraid
  ##     - _gac
  ##     - _gcl
  ##     - epik
  ##     - code
  ##     - state
  ##     - session_state
  cacheIgnoreParams: ""

  ####
  ## @param Multi channel/site configuration object
  ##  multiChannel: |-
  ##    .+:
  ##      - baseHref: /en
  ##        channel: default
  ##        lang: en_US
  ##      - baseHref: /de
  ##        channel: default
  ##        lang: de_DE
  ##      - baseHref: /fr
  ##        channel: default
  ##        lang: fr_FR
  ##      - baseHref: /b2b
  ##        channel: default
  ##        theme: blue
  multiChannel: ""

  ####
  ## @param extraEnvVars Extra environment variables to be set on NGINX containers
  ## E.g:
  ##  extraEnvVars:
  ##    - name: "MULTI_CHANNEL"
  ##      value: |-
  ##        .+:
  ##          - baseHref: /en
  ##            channel: default
  ##            lang: en_US
  ##          - baseHref: /de
  ##            channel: default
  ##            lang: de_DE
  ##    - name: "FOO"
  ##      value: "BAR"
  extraEnvVars: []

  ####
  ## @param prefetch Specify settings for the prefetch job that heats up caches.
  ## E.g:
  ##  prefetch:
  ##  - host: customer-int.pwa.intershop.de
  ##    path: /
  ##    protocol: https
  ##    stop: 3600
  ##    cron: "0 0 * * *"
  prefetch: []
  ## Prometheus Exporter / Metrics
  ##
  metrics:
    ## @param metrics.enabled Expose Prometheus metrics of NGINX container
    ##
    enabled: false

  replicaCount: 1

  image:
    repository: intershophub/intershop-pwa-nginx
    tag: latest
    pullPolicy: Always

  nameOverride: ""
  fullnameOverride: ""

  service:
    type: ClusterIP
    port: 4200

  resources: {}

  nodeSelector: {}

  tolerations: []

  affinity: {}
  ## @param podAnnotations Annotations for NGINX pods
  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
  ##
  podAnnotations: {}

  livenessProbe: {}

  readinessProbe: {}

ingress:
  enabled: true
  className: nginx
  annotations: {}
    # kubernetes.io/tls-acme: "true"
    # kubernetes.io/ingress.class: nginx
  hosts:
    - host: pwa.example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local
