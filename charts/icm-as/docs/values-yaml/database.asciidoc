= Documentation about the `values.yaml` attributes belonging to section `database`
// GitHub issue: https://github.com/github/markup/issues/1095

:icons: font

++++
<style>
.mand {
  color: #e00000;
}
.opt {
  color: #b0adac;
}
.cond {
  color: #FFDC00;
}
.tag-audience {
  font-style: italic;
}
.tag-audience::before {
  content: "@Target Audience: ";
}
.tag-since {
  font-style: italic;
}
.tag-since::before {
  content: "@Since: ";
}
.tag-deprecated {
  font-style: italic;
}
.tag-deprecated::before {
  content: "@Deprecated: ";
}
.placeholder {
  font-style: italic;
}
.placeholder::before {
  content: "<";
}
.placeholder::after {
  content: ">";
}
</style>
++++

:mandatory: icon:check[role="mand"]
:optional: icon:times[role="opt"]
:conditional: icon:question[role="cond"]


=== Description

Configures the database connection to be used by the `icm-as` appserver. The following attributes are available:

[cols="1,3,1,1,1",options="header"]
|===
|Attribute |Description |Type |Mandatory |Default Value
|type|the type/vendor of the database|enum {`mssql`, `oracle`}|{optional}|`mssql`
|jdbcURL|the JDBC url pointing to the database|JDBC URL|{mandatory}|-
|jdbcUser|the database user|string|{mandatory}|-
|jdbcPassword|the database password|string|{conditional} mandatory if `jdbcPasswordSecretKeyRef` is not set |-
|jdbcPasswordSecretKeyRef|a secret key reference pointing to a secret containing the database password. *Takes precedence over `jdbcPassword`.* |<<_secretKeyRef,SecretKeyRef>>|{conditional} mandatory if `jdbcPassword` is not set |-
|===

[#_secretKeyRef]
==== Type `SecretKeyRef`

The type `SecretKeyRef` contains the following attributes to reference a value inside of a Kubernetes secret:

[cols="1,3,1,1,1",options="header"]
|===
|Attribute |Description |Type |Mandatory |Default Value
|name|name of the secret|string|{mandatory}|-
|key|key inside the secret pointing to the referenced value|string|{mandatory}|-
|===

=== Example

[source,yaml]
----
database:
  type: "mssql"
  jdbcURL: "jdbc:sqlserver://host.privatelink.database.windows.net:1433;database=icm-as;" <1>
  jdbcUser: "icm-as" <2>
  jdbcPasswordSecretKeyRef:
    name: icm-database <3>
    key: password
----
This example configures the `icm-as` appserver to use a Microsoft SQL database:

<1> JDBC URL: `jdbc:sqlserver://host.privatelink.database.windows.net:1433;database=icm-as;`
<2> Database user: `icm-as`
<3> Database password: taken from the secret `icm-database`