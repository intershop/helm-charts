.. topic:: Navigation

  +--------------------------+-----------------+--------------------------+
  |`< Back                   |`^ Up            |`Next >                   |
  |<ParametersPostgres.rst>`_|<../README.rst>`_|<SecretKeyRef.rst>`_      |
  +--------------------------+-----------------+--------------------------+

IOM Tests
*********

The *iom-tests* sub-chart provides a very generic way to run tests on an IOM installation. The sub-chart and the according parameters are simply the pure skeleton, resulting from a helm create call.

+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|Parameter                                           |Description                                                                                    |Default Value                                 |
|                                                    |                                                                                               |                                              |
+====================================================+===============================================================================================+==============================================+
|iom-tests.enabled                                   |Enables the rollout of iom-tests sub-chart.                                                    |false                                         |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.env                                       |List of environment variables required by the tests pod.                                       |                                              |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.replicaCount                              |Desired number of iom-tests pods.                                                              |1                                             |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.image.repository                          |Docker image repository.                                                                       |iom-tests                                     |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.image.pullPolicy                          |Docker image pull policy.                                                                      |IfNotPresent                                  |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.image.tag                                 |Docker image tag.                                                                              |                                              |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.imagePullSecrets                          |List of the secrets to get credentials from.                                                   |[]                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.nameOverride                              |Overwrites chart name.                                                                         |                                              |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.fullnameOverride                          |Overwrites complete name, constructed from release, and chart name.                            |                                              |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.serviceAccount.create                     |If true , creates a backend service account. Only useful if you need a pod security policy to  |true                                          |
|                                                    |run the backend.                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.serviceAccount.annotations                |Annotations for the service account. Only used if create is *true*.                            |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.serviceAccount.name                       |The name of the backend service account to use. If not set and create is *true*, a name is     |                                              |
|                                                    |generated using the fullname template. Only useful if you need a pod security policy to run the|                                              |
|                                                    |backend.                                                                                       |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.podAnnotations                            |Annotations to be added to pods.                                                               |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.podSecurityContext                        |Security context policies to add to the iom-tests pod.                                         |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.securityContext                           |List of required privileges.                                                                   |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.service.type                              |Type of service to create.                                                                     |ClusterIP                                     |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.service.port                              |Port to be exposed by service.                                                                 |80                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.ingress.enabled                           |Enables ingress for iom-tests. It is suggested to get access to test results this way.         |true                                          |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.ingress.className                         |The ingress class has to be specified by *ingress.className*. This parameter controls on which |nginx                                         |
|                                                    |ingress controller the ingress should be created. It replaces the unspecified annotation       |                                              |
|                                                    |*kubernetes.io/ingress.class*.                                                                 |                                              |
|                                                    |                                                                                               |                                              |
|                                                    |If the integrated NGINX controller should be used to serve incoming requests, the parameter    |                                              |
|                                                    |*ingress.className* has to be set to *nginx-iom*.                                              |                                              |
|                                                    |                                                                                               |                                              |
|                                                    |* Available since IOM Helm charts 1.5.0                                                        |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.ingress.annotations                       |Annotations for the ingress.                                                                   |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.ingress.hosts                             |A list of ingress hosts.                                                                       |.. code-block:: yaml                          |
|                                                    |                                                                                               |                                              |
|                                                    |The default value grants access to IOM.                                                        |  - host: chart-example.local                 |
|                                                    |                                                                                               |    paths:                                    |
|                                                    |* As of IOM Helm charts 1.5.0, the syntax of ingress objects has to match the requirements of  |      - path: /                               |
|                                                    |  Kubernetes 1.19 (see https://kubernetes.io/docs/concepts/services-networking/ingress/).      |        pathType: Prefix                      |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.ingress.tls                               |A list of IngressTLS items.                                                                    |[]                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.containerPort                             |The port used by the container to provide its service.                                         |8080                                          |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.resources                                 |Resource requests & limits.                                                                    |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.autoscaling.enabled                       |If true, creates Horizontal Pod Autoscaler.                                                    |false                                         |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.autoscaling.maxReplicas                   |If autoscaling enabled, this field sets the maximum replica count.                             |100                                           |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.autoscaling.targetCPUUtilizationPercentage|Target CPU utilization percentage to scale.                                                    |80                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.nodeSelector                              |Node labels for pod assignment.                                                                |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.tolerations                               |Node taints to tolerate (requires Kubernetes >=1.6).                                           |[]                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+
|iom-tests.affinity                                  |Node/pod affinities (requires Kubernetes >=1.6).                                               |{}                                            |
|                                                    |                                                                                               |                                              |
+----------------------------------------------------+-----------------------------------------------------------------------------------------------+----------------------------------------------+

.. topic:: Navigation

  +--------------------------+-----------------+--------------------------+
  |`< Back                   |`^ Up            |`Next >                   |
  |<ParametersPostgres.rst>`_|<../README.rst>`_|<SecretKeyRef.rst>`_      |
  +--------------------------+-----------------+--------------------------+
